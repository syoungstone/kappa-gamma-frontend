(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d71b4a2"],{"03cf":function(e,s,t){},5413:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"wide-wrapper"},[t("h1",[e._v("Pledge Classes")]),e.loaded?t("div",[null!=e.$store.state.position?t("div",{attrs:{id:"create-new"}},[t("h4",[e._v("Create new pledge class")]),t("b-form",{attrs:{inline:"",id:"create-form"},on:{submit:function(s){return s.preventDefault(),e.onSubmit(s)}}},[t("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"Class Name",required:""},model:{value:e.newPledgeClass.class_name,callback:function(s){e.$set(e.newPledgeClass,"class_name",s)},expression:"newPledgeClass.class_name"}}),t("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-custom-select-pref",options:[{text:"Semester",value:null},{text:"Fall",value:"F"},{text:"Spring",value:"S"}],placeholder:"Semester",required:""},model:{value:e.newPledgeClass.semester,callback:function(s){e.$set(e.newPledgeClass,"semester",s)},expression:"newPledgeClass.semester"}}),t("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",type:"number",placeholder:"Year",required:""},model:{value:e.newPledgeClass.accounting_year,callback:function(s){e.$set(e.newPledgeClass,"accounting_year",s)},expression:"newPledgeClass.accounting_year"}}),t("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Create")])],1)],1):e._e(),t("b-table",{attrs:{striped:"",hover:"",small:"",items:e.pledgeClasses,fields:e.fields,id:"class-table"},scopedSlots:e._u([{key:"cell(semestername)",fn:function(s){return[e._v(" "+e._s("F"==s.item.semester?"Fall ":"Spring ")+" ")]}},{key:"cell(actions)",fn:function(s){return[t("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(t){return e.viewPledgeClass(s.item.semester,s.item.accounting_year,s.item.num_students)}}},[e._v(" View ")]),null!=e.$store.state.position?t("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(t){return e.deletePledgeClass(s.item.class_name,s.item.num_students)}}},[e._v(" Delete ")]):e._e()]}}],null,!1,2449242455)})],1):t("LoadingSpinner")],1)},n=[],l=(t("7db0"),t("bc3a")),i=t.n(l),r=t("d76c"),o={components:{LoadingSpinner:r["a"]},created:function(){this.load()},data:function(){return{pledgeClasses:null,fields:[{key:"class_name"},{key:"semestername",label:"Semester"},{key:"accounting_year",label:"Year"},{key:"num_students",label:"Size"},{key:"actions",label:"Actions"}],newPledgeClass:{class_name:null,accounting_year:null,semester:null},toDelete:{class_name:null},loaded:!1}},methods:{onSubmit:function(){var e=this;if(this.pledgeClasses.find(this.classNameExists)){var s="Pledge Class Already Exists",t='A pledge class with name "'+this.newPledgeClass.class_name+'" already exists. Please select a unique pledge class name.';this.$root.$children[0].showMessage(s,t)}else if(this.pledgeClasses.find(this.classYearSemesterExists)){var a="Pledge Class Already Exists",n="A pledge class for "+("F"==this.newPledgeClass.semester?"Fall ":"Spring ")+this.newPledgeClass.accounting_year+" already exists. Please select a different semester/year combination.";this.$root.$children[0].showMessage(a,n)}else i.a.post(this.$store.state.apiURL+"create_pledge_class.php",JSON.stringify(this.newPledgeClass),{headers:{Authorization:this.$store.state.jwt}}).then((function(){e.newPledgeClass.class_name=null,e.newPledgeClass.accounting_year=null,e.newPledgeClass.semester=null,e.load()})).catch((function(s){return e.$root.$children[0].showError(s)}))},load:function(){var e=this;i.a.get(this.$store.state.apiURL+"read_pledge_classes.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(s){e.pledgeClasses=s.data.body,e.newPledgeClass.accounting_year=(new Date).getFullYear(),e.loaded=!0})).catch((function(s){return e.$root.$children[0].showError(s)}))},deletePledgeClass:function(e,s){var t=this;if(this.toDelete.class_name=e,s>0){var a="Cannot Delete Pledge Class",n="Pledge class "+this.toDelete.class_name+" cannot be deleted until all of its members have been assigned to a new pledge class.";this.$root.$children[0].showMessage(a,n)}else i.a.delete(this.$store.state.apiURL+"delete_pledge_class.php",{data:this.toDelete,headers:{Authorization:this.$store.state.jwt}}).then((function(){t.load()})).catch((function(e){return t.$root.$children[0].showError(e)}))},viewPledgeClass:function(e,s,t){if(0==t){var a="Nothing to Show",n="This pledge class has no members.";this.$root.$children[0].showMessage(a,n)}else this.$router.push("/pledgeclass/"+e+s,(function(){}))},classNameExists:function(e){return e.class_name==this.newPledgeClass.class_name},classYearSemesterExists:function(e){return e.semester==this.newPledgeClass.semester&&e.accounting_year==this.newPledgeClass.accounting_year}}},c=o,d=(t("edee"),t("2877")),u=Object(d["a"])(c,a,n,!1,null,"3f683efe",null);s["default"]=u.exports},"7db0":function(e,s,t){"use strict";var a=t("23e7"),n=t("b727").find,l=t("44d2"),i="find",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),a({target:"Array",proto:!0,forced:r},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),l(i)},ac45:function(e,s,t){"use strict";t("03cf")},d15d:function(e,s,t){},d76c:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"spinner-wrapper"}},[t("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}})],1)},n=[],l={name:"LoadingSpinner"},i=l,r=(t("ac45"),t("2877")),o=Object(r["a"])(i,a,n,!1,null,"046d5688",null);s["a"]=o.exports},edee:function(e,s,t){"use strict";t("d15d")}}]);
//# sourceMappingURL=chunk-2d71b4a2.d638d5a8.js.map