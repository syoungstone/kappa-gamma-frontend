(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69b1d298"],{"03cf":function(e,t,l){},"517c":function(e,t,l){},6400:function(e,t,l){"use strict";l("517c")},"66d6":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"wide-wrapper"},[l("h1",[e._v("Directory")]),e.loaded?l("div",{attrs:{id:"contents"}},[l("b-modal",{ref:"modal",attrs:{id:"delete-pledge-modal",title:"Delete Pledge"},on:{ok:function(t){return e.deletePledge()}},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.cancel,s=t.ok;return[l("b-button",{attrs:{size:"sm"},on:{click:function(e){return a()}}},[e._v(" Cancel ")]),l("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return s()}}},[e._v(" Delete ")])]}}],null,!1,1030801785)},[l("p",[e._v(" Are you sure you want to delete pledge "+e._s(this.toDeleteName)+"? This action cannot be undone. ")])]),l("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[l("b-input-group",{attrs:{size:"sm",id:"search"}},[l("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),l("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(t){e.showFilters=!e.showFilters}}},[e._v(e._s(e.showFilters?"Hide Filters":"Show Filters"))])],1)],1),e.showFilters?l("div",{staticClass:"row justify-content-center filters"},[l("b-form-group",{staticClass:"filter",attrs:{id:"input-group-1",label:"Pledge/Brother:","label-for":"input-1"}},[l("b-form-select",{attrs:{id:"input-1",options:e.isPledgeOptions},model:{value:e.isPledge,callback:function(t){e.isPledge=t},expression:"isPledge"}})],1),l("b-form-group",{staticClass:"filter",attrs:{id:"input-group-2",label:"Status:","label-for":"input-2"}},[l("b-form-select",{attrs:{id:"input-2",options:e.brotherStatusOptions},model:{value:e.brotherStatus,callback:function(t){e.brotherStatus=t},expression:"brotherStatus"}})],1),l("b-form-group",{staticClass:"filter",attrs:{id:"input-group-3",label:"Pledge Class:","label-for":"input-3"}},[l("b-form-select",{attrs:{id:"input-3",options:e.pledgeClassOptions},model:{value:e.pledgeClass,callback:function(t){e.pledgeClass=t},expression:"pledgeClass"}})],1),l("b-form-group",{staticClass:"filter",attrs:{id:"input-group-4",label:"Major:","label-for":"input-4"}},[l("b-form-select",{attrs:{id:"input-4",options:e.majorOptions},model:{value:e.major,callback:function(t){e.major=t},expression:"major"}})],1),l("b-form-group",{staticClass:"filter",attrs:{id:"input-group-5",label:"Grad Year:","label-for":"input-5"}},[l("b-form-select",{attrs:{id:"input-5",options:e.gradYearOptions},model:{value:e.gradYear,callback:function(t){e.gradYear=t},expression:"gradYear"}})],1)],1):e._e(),l("b-table",{attrs:{striped:"",hover:"",items:e.narrowedData,fields:e.fields,filter:e.filter,"filter-included-fields":e.filter_included_fields,stacked:"md","show-empty":"","current-page":e.currentPage,"per-page":e.perPage},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[l("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(l){return e.viewStudent(t.item.id)}}},[e._v(" View ")]),null!=e.$store.state.position?l("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(l){return e.editStudent(t.item.id)}}},[e._v(" Edit ")]):e._e(),null!=e.$store.state.position&&1==t.item.is_pledge?l("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(l){return e.prepareDeletion(t.item.id,t.item.is_pledge,t.item.name_first,t.item.name_last)}}},[e._v(" Delete ")]):e._e()]}}],null,!1,3022784641)}),l("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[l("b-pagination",{staticClass:"my-0",attrs:{id:"pages","total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1):l("LoadingSpinner")],1)},s=[],i=(l("4de4"),l("1276"),l("ac1f"),l("caad"),l("2532"),l("bc3a")),r=l.n(i),n=l("d76c"),o={components:{LoadingSpinner:n["a"]},created:function(){this.getStudents()},computed:{narrowedData:function(){return this.data.filter(this.filterData)}},data:function(){return{showFilters:!1,fields:[{key:"roll_number",label:"Roll",sortable:!0},{key:"name_last",label:"Last Name",sortable:!0},{key:"name_first",label:"First Name",sortable:!0},{key:"phone_number",label:"Phone",sortable:!1},{key:"email",sortable:!1},{key:"actions",label:"Actions",sortable:!1}],data:[],isPledgeOptions:[{value:null,text:"All"},{value:1,text:"Pledge"},{value:0,text:"Brother"}],isPledge:null,brotherStatusOptions:[{value:null,text:"All"},{value:"active",text:"Active"},{value:"inactive",text:"Inactive"},{value:"early alum",text:"Early Alum"},{value:"alumni",text:"Alumni"}],brotherStatus:null,pledgeClassOptions:[{value:null,text:"All"}],pledgeClass:null,majorOptions:[{value:null,text:"All"},{value:"Biomedical Engineering",text:"BME"},{value:"Chemical and Life Science Engineering",text:"CLSE"},{value:"Computer Engineering",text:"CE"},{value:"Computer Science",text:"CS"},{value:"Electrical Engineering",text:"EE"},{value:"Mechanical Engineering",text:"MNE"}],major:null,gradYearOptions:[{value:null,text:"All"}],gradYear:null,totalRows:1,currentPage:1,perPage:5,filter:null,filter_included_fields:["name_first","name_middle","name_last"],response:null,error:null,loaded:!1,toDeleteName:null,toDeleteId:null}},methods:{getStudents:function(){var e=this;r.a.get(this.$store.state.apiURL+"read_students.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(t){e.data=t.data.body,e.totalRows=e.data.length,e.getFirstEmail(),e.appendGradYears(),e.getPledgeClasses()})).catch((function(t){return e.$root.$children[0].showError(t)}))},getFirstEmail:function(){var e;for(e=0;e<this.totalRows;e++)this.data[e].email=this.data[e].emails.split(",")[0]},appendGradYears:function(){var e;for(e=(new Date).getFullYear()+5;e>=1998;e--)this.gradYearOptions.push(e)},getPledgeClasses:function(){var e=this;r.a.get(this.$store.state.apiURL+"read_pledge_classes.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(t){var l;for(l=0;l<t.data.body.length;l++)e.pledgeClassOptions.push(t.data.body[l].class_name);e.loaded=!0})).catch((function(t){return e.$root.$children[0].showError(t)}))},filterData:function(e){var t=!0;return null!=this.gradYear&&(t=t&&e.grad_year==this.gradYear),null!=this.pledgeClass&&(t=t&&e.pledge_class==this.pledgeClass),null!=this.isPledge&&(t=t&&e.is_pledge==this.isPledge),null!=this.brotherStatus&&(t=t&&e.brother_status==this.brotherStatus),null!=this.major&&(t=t&&e.majors.includes(this.major)),t},onFiltered:function(e){console.log(this.filter),this.totalRows=e.length,this.currentPage=1},viewStudent:function(e){this.$router.push("/student/"+e,(function(){}))},editStudent:function(e){this.$router.push("/edit/"+e,(function(){}))},prepareDeletion:function(e,t,l,a){0==t?console.log("Let's delete brother "+e):(this.toDeleteName=l+" "+a,this.toDeleteId=e,this.$bvModal.show("delete-pledge-modal"))},deletePledge:function(){var e=this;r.a.delete(this.$store.state.apiURL+"delete_pledge.php?id="+this.toDeleteId,{headers:{Authorization:this.$store.state.jwt}}).then((function(t){var l="Pledge Deleted",a=t.data;e.$root.$children[0].showMessage(l,a),e.getStudents()})).catch((function(t){return e.$root.$children[0].showError(t)}))}}},u=o,d=(l("6400"),l("2877")),c=Object(d["a"])(u,a,s,!1,null,"c823cf4e",null);t["default"]=c.exports},ac45:function(e,t,l){"use strict";l("03cf")},d76c:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"spinner-wrapper"}},[l("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}})],1)},s=[],i={name:"LoadingSpinner"},r=i,n=(l("ac45"),l("2877")),o=Object(n["a"])(r,a,s,!1,null,"046d5688",null);t["a"]=o.exports}}]);
//# sourceMappingURL=chunk-69b1d298.3eb3e30f.js.map