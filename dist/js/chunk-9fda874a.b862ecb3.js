(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9fda874a"],{"26d3":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"narrow-wrapper"},[r("h1",[t._v(t._s(t.$route.name))]),r("h4",[t._v("Change Password")]),r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("b-form-group",{attrs:{id:"input-group-4","label-for":"input-4","invalid-feedback":"Password must be at least 8 characters long.",state:t.state1}},[r("b-form-input",{attrs:{id:"input-4",type:"password",placeholder:"New password",state:t.state1,required:""},on:{input:function(e){return t.updateState1()}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("b-form-group",{attrs:{id:"input-group-5","label-for":"input-5","invalid-feedback":"Passwords don't match.",state:t.state2}},[r("b-form-input",{attrs:{id:"input-5",type:"password",placeholder:"Confirm password",state:t.state2,required:""},on:{input:function(e){return t.updateState2()}},model:{value:t.password_confirm,callback:function(e){t.password_confirm=e},expression:"password_confirm"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t.error?r("p",[t._v("Attempt to change password failed.")]):t._e(),t.error?r("p",[t._v(t._s(t.error))]):t._e()],1),r("h4",[t._v("Delete Account")]),t.deletePressed?r("div",{staticClass:"delete"},[r("p",[t._v(" Are you sure? You will need to re-register if you want to use the brother portal again. ")]),r("b-button",{staticClass:"delete-button",on:{click:t.deleteAccount}},[t._v("Yes, Delete My Account")])],1):r("div",[r("p",[t._v("Warning: this action is permanent")]),r("b-button",{staticClass:"delete delete-button",on:{click:t.deleteButton}},[t._v("Delete")])],1),t.deleteError?r("p",[t._v("Attempt to delete account failed.")]):t._e(),t.deleteError?r("p",[t._v(t._s(t.deleteError))]):t._e()],1)},o=[],a=r("bc3a"),n=r.n(a),i={data:function(){return{form:{email:this.$store.state.user,password:"",jwt:this.$store.state.jwt},deletePressed:!1,password_confirm:"",error:"",deleteError:"",state1:null,state2:null}},methods:{onSubmit:function(){var t=this;n.a.post(this.$store.state.apiURL+"update_user.php",JSON.stringify(this.form)).then((function(e){t.$root.$children[0].showSuccess(e.data.message),t.$store.commit("setJwt",e.data.jwt)})).catch((function(e){return t.error=e}))},deleteButton:function(){this.deletePressed=!0},deleteAccount:function(){var t=this;n.a.delete(this.$store.state.apiURL+"delete_user.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.$root.$children[0].showSuccess(e.data.message),t.$store.commit("logout"),t.$router.push("/",(function(){}))})).catch((function(e){return t.deleteError=e}))},updateState1:function(){this.state1=this.form.password.length>=8,this.updateState2()},updateState2:function(){this.state2=this.form.password==this.password_confirm}}},u=i,d=(r("a4cf"),r("2877")),c=Object(d["a"])(u,s,o,!1,null,"607af1d6",null);e["default"]=c.exports},5150:function(t,e,r){},a4cf:function(t,e,r){"use strict";r("5150")}}]);
//# sourceMappingURL=chunk-9fda874a.b862ecb3.js.map