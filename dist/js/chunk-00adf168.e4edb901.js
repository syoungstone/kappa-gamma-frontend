(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00adf168"],{"03cf":function(e,t,n){},"1b2a":function(e,t,n){"use strict";n("2b03")},"2b03":function(e,t,n){},"7db0":function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").find,r=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},ac45:function(e,t,n){"use strict";n("03cf")},ad2b:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wide-wrapper"},[n("h1",[e._v("Lineages")]),e.loaded?n("div",[e.$store.state.isOfficer?n("div",{attrs:{id:"create-new"}},[n("b-modal",{ref:"modal",attrs:{id:"repeat-founder-modal",title:"No Duplicate Lineage Founders","hide-footer":""}},[n("p",[e._v(e._s(this.modalMessage))])]),n("b-modal",{ref:"modal",attrs:{id:"name-exists-modal",title:"Lineage Already Exists","hide-footer":""}},[n("p",[e._v(e._s(this.modalMessage))])]),n("b-modal",{ref:"modal",attrs:{id:"delete-lineage-modal",title:"Warning: Deleting Lineage"},on:{ok:function(t){return e.deleteLineage()}},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var i=t.cancel,a=t.ok;return[n("b-button",{attrs:{size:"sm"},on:{click:function(e){return i()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return a()}}},[e._v(" Delete Anyway ")])]}}],null,!1,1754263936)},[n("p",[e._v(" Are you sure you want to delete the "+e._s(e.toDelete.lineage_name)+" lineage? After a lineage is deleted, it cannot be retrieved. It is strongly suggested not to delete a lineage unless you intend to replace it with another right away. ")])]),n("h4",[e._v("Create new lineage")]),n("b-form",{attrs:{inline:"",id:"create-form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"Lineage Name",required:""},model:{value:e.newLineage.lineage_name,callback:function(t){e.$set(e.newLineage,"lineage_name",t)},expression:"newLineage.lineage_name"}}),n("vue-single-select",{staticClass:"founder-select",attrs:{options:e.brothers,"option-key":"id",optionValue:"id",placeholder:"Founder Name",required:"",getOptionDescription:e.getCustomDescription},model:{value:e.newFounder,callback:function(t){e.newFounder=t},expression:"newFounder"}}),n("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Create")])],1)],1):e._e(),n("b-table",{attrs:{striped:"",hover:"",small:"",items:e.lineages,fields:e.fields,id:"lineage-table"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(n){return e.viewLineage(t.item.lineage_id)}}},[e._v(" View ")]),e.$store.state.isOfficer?n("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(n){return e.prepareDeletion(t.item)}}},[e._v(" Delete ")]):e._e()]}}],null,!1,3455338334)})],1):n("LoadingSpinner")],1)},a=[],r=(n("7db0"),n("bc3a")),s=n.n(r),o=n("d76c"),l={components:{LoadingSpinner:o["a"]},created:function(){this.$store.state.isOfficer?this.readBrothers():this.load()},data:function(){return{lineages:null,brothers:null,fields:[{key:"lineage_name",label:"Name"},{key:"founder_name",label:"Founder"},{key:"actions",label:"Actions"}],newFounder:null,newLineage:{lineage_name:null,founder_name:null,founder:null},toDelete:{lineage_name:null,founder_name:null,founder:null},loaded:!1,modalMessage:""}},methods:{onSubmit:function(){var e=this;this.newLineage.founder=this.newFounder.id,this.newLineage.founder_name=this.getCustomDescription(this.newFounder),this.lineages.find(this.lineageNameExists)?(this.modalMessage='A lineage with name "'+this.newLineage.lineage_name+'" already exists. Please select a unique lineage name.',this.$bvModal.show("name-exists-modal")):this.lineages.find(this.founderExists)?(this.modalMessage=this.newLineage.founder_name+" is already listed as the founder of another lineage. Please select a unique founder.",this.$bvModal.show("repeat-founder-modal")):s.a.post(this.$store.state.apiURL+"create_lineage.php",JSON.stringify(this.newLineage),{headers:{Authorization:this.$store.state.jwt}}).then((function(){e.newLineage.lineage_name=null,e.newLineage.founder_name=null,e.newLineage.founder=null,e.load()})).catch((function(t){return e.$root.$children[0].showError(t)}))},readBrothers:function(){var e=this;s.a.get(this.$store.state.apiURL+"read_brothers.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(t){e.brothers=t.data.body,e.load()})).catch((function(t){return e.$root.$children[0].showError(t)}))},load:function(){var e=this;s.a.get(this.$store.state.apiURL+"read_lineages.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(t){e.lineages=t.data.body,e.loaded=!0})).catch((function(t){return e.$root.$children[0].showError(t)}))},prepareDeletion:function(e){this.toDelete=e,this.$bvModal.show("delete-lineage-modal")},deleteLineage:function(){var e=this;s.a.delete(this.$store.state.apiURL+"delete_lineage.php?id="+this.toDelete.lineage_id,{headers:{Authorization:this.$store.state.jwt}}).then((function(t){e.$root.$children[0].showSuccess(t.data.message),e.load()})).catch((function(t){e.$root.$children[0].showError(t)}))},viewLineage:function(e){this.$router.push("/lineage/"+e,(function(){}))},lineageNameExists:function(e){return e.lineage_name==this.newLineage.lineage_name},founderExists:function(e){return e.founder==this.newLineage.founder},getCustomDescription:function(e){return e.name_first+" "+e.name_last}}},u=l,d=(n("1b2a"),n("2877")),c=Object(d["a"])(u,i,a,!1,null,"6a0d7849",null);t["default"]=c.exports},d76c:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"spinner-wrapper"}},[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}})],1)},a=[],r={name:"LoadingSpinner"},s=r,o=(n("ac45"),n("2877")),l=Object(o["a"])(s,i,a,!1,null,"046d5688",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-00adf168.e4edb901.js.map