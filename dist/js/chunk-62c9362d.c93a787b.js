(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62c9362d"],{"03cf":function(t,e,s){},"0a74":function(t,e,s){},"66d6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wide-wrapper"},[s("h1",[t._v("Directory")]),t.loaded?s("div",{attrs:{id:"contents"}},[s("b-modal",{ref:"modal",attrs:{id:"delete-pledge-modal",title:"Delete Pledge"},on:{ok:function(e){return t.deletePledge()}},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel,n=e.ok;return[s("b-button",{attrs:{size:"sm"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" Delete ")])]}}],null,!1,1030801785)},[s("p",[t._v(" Are you sure you want to delete pledge "+t._s(this.toDeleteName)+"? This action cannot be undone. ")])]),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-input-group",{attrs:{size:"sm",id:"search"}},[s("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1),s("div",{attrs:{id:"buttons"}},[s("b-button",{staticClass:"select-button",attrs:{pressed:t.active},on:{click:function(e){return t.showActive()}}},[t._v("Active Brothers")]),s("b-button",{staticClass:"select-button",attrs:{pressed:t.pledges},on:{click:function(e){return t.showPledges()}}},[t._v("Pledges")]),s("b-button",{staticClass:"select-button",attrs:{pressed:t.alumni},on:{click:function(e){return t.showAlumni()}}},[t._v("Alumni")]),s("b-button",{staticClass:"select-button",attrs:{pressed:t.all},on:{click:function(e){return t.showAll()}}},[t._v("Show All")])],1),s("b-table",{attrs:{striped:"",hover:"",items:t.data.body,fields:t.fields,filter:t.filter,stacked:"md","show-empty":"","current-page":t.currentPage,"per-page":t.perPage},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(s){return t.viewStudent(e.item.id)}}},[t._v(" View ")]),t.$store.state.isOfficer?s("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(s){return t.editStudent(e.item.id)}}},[t._v(" Edit ")]):t._e(),t.$store.state.isOfficer&&1==e.item.is_pledge?s("b-button",{staticClass:"select-button",attrs:{size:"sm"},on:{click:function(s){return t.prepareDeletion(e.item.id,e.item.is_pledge,e.item.name_first,e.item.name_last)}}},[t._v(" Delete ")]):t._e()]}}],null,!1,4085629793)}),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{id:"pages","total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):s("LoadingSpinner")],1)},n=[],i=s("bc3a"),o=s.n(i),r=s("d76c"),l={components:{LoadingSpinner:r["a"]},created:function(){var t=this;o.a.get(this.$store.state.apiURL+"read_active.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.data=e.data,t.loaded=!0,t.totalRows=t.data.body.length})).catch((function(e){return t.$root.$children[0].showError(e)}))},data:function(){return{selected:null,fields:[{key:"roll_number",label:"Roll",sortable:!0},{key:"name_last",label:"Last Name",sortable:!0},{key:"name_first",label:"First Name",sortable:!0},{key:"phone_number",label:"Phone",sortable:!1},{key:"email",sortable:!1},{key:"actions",label:"Actions",sortable:!1}],data:[],totalRows:1,currentPage:1,perPage:5,filter:null,response:null,error:null,loaded:!1,active:!0,pledges:!1,alumni:!1,all:!1,toDeleteName:null,toDeleteId:null}},methods:{showActive:function(){var t=this;this.active=!0,this.pledges=!1,this.alumni=!1,this.all=!1,o.a.get(this.$store.state.apiURL+"read_active.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.data=e.data,t.loaded=!0,t.totalRows=t.data.body.length})).catch((function(e){return t.$root.$children[0].showError(e)}))},showPledges:function(){var t=this;this.active=!1,this.pledges=!0,this.alumni=!1,this.all=!1,o.a.get(this.$store.state.apiURL+"read_pledges.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.data=e.data,t.loaded=!0,t.totalRows=t.data.body.length})).catch((function(e){return t.$root.$children[0].showError(e)}))},showAlumni:function(){var t=this;this.active=!1,this.pledges=!1,this.alumni=!0,this.all=!1,o.a.get(this.$store.state.apiURL+"read_alumni.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.data=e.data,t.loaded=!0,t.totalRows=t.data.body.length})).catch((function(e){return t.$root.$children[0].showError(e)}))},showAll:function(){var t=this;this.active=!1,this.pledges=!1,this.alumni=!1,this.all=!0,o.a.get(this.$store.state.apiURL+"read_students.php",{headers:{Authorization:this.$store.state.jwt}}).then((function(e){t.data=e.data,t.loaded=!0,t.totalRows=t.data.body.length})).catch((function(e){return t.$root.$children[0].showError(e)}))},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},viewStudent:function(t){this.$router.push("/student/"+t,(function(){}))},editStudent:function(t){this.$router.push("/edit/"+t,(function(){}))},prepareDeletion:function(t,e,s,a){0==e?console.log("Let's delete brother "+t):(this.toDeleteName=s+" "+a,this.toDeleteId=t,this.$bvModal.show("delete-pledge-modal"))},deletePledge:function(){var t=this;o.a.delete(this.$store.state.apiURL+"delete_pledge.php?id="+this.toDeleteId,{headers:{Authorization:this.$store.state.jwt}}).then((function(e){var s="Pledge Deleted",a=e.data;t.$root.$children[0].showMessage(s,a),t.pledges?t.showPledges():t.showAll()})).catch((function(e){return t.$root.$children[0].showError(e)}))}}},c=l,d=(s("f311"),s("2877")),u=Object(d["a"])(c,a,n,!1,null,"7323430e",null);e["default"]=u.exports},ac45:function(t,e,s){"use strict";s("03cf")},d76c:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"spinner-wrapper"}},[s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}})],1)},n=[],i={name:"LoadingSpinner"},o=i,r=(s("ac45"),s("2877")),l=Object(r["a"])(o,a,n,!1,null,"046d5688",null);e["a"]=l.exports},f311:function(t,e,s){"use strict";s("0a74")}}]);
//# sourceMappingURL=chunk-62c9362d.c93a787b.js.map